@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Custom Properties for July Design System */
:root {
  /* Colors */
  --bg-main: #0f0f0f;
  --bg-secondary: #141414;
  --bg-action: #ffffff;
  --border-main: #1f1f1f;
  --border-secondary: #666666;
  --border-action: #ffffff;
  --bg-action-secondary: #282828;
  --text-main: #ffffff;
  --text-secondary: #a2a2a2;
  --text-placeholder: #999999;
  --text-black: #1f1f1f;
  --icon-main: #ffffff;
  --icon-secondary: #a3a3a3;
  --icon-active: #1f1f1f;
  
  /* Spacing Scale */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 16px;
  --spacing-lg: 24px;
  
  /* Typography */
  --font-body-size: 14px;
  --font-body-line-height: 20px;
  --font-h2-size: 24px;
  --font-h2-line-height: 32px;
  --font-h3-size: 14px;
  --font-h3-line-height: 20px;
  
  /* Text Action Color for Calculate button text */
  --text-action: #000000;
}

/* Placeholder text styling */
input::placeholder {
  color: var(--text-secondary) !important;
}

input::-webkit-input-placeholder {
  color: var(--text-secondary) !important;
}

input::-moz-placeholder {
  color: var(--text-secondary) !important;
  opacity: 1;
}

input:-ms-input-placeholder {
  color: var(--text-secondary) !important;
}

/* Enhanced Button Component */
.enhanced-button {
  box-sizing: border-box;
  width: 100%; /* AC #2: Fill current UI width */
  height: 28px;
  position: relative;

  /* AC #4: Enhanced shadows using #141414 color */
  box-shadow:
    0px 1px 2px 0px rgba(20, 20, 20, 0.25),
    0px 2px 6px 1px rgba(20, 20, 20, 0.18),
    0px 4px 12px 2px rgba(20, 20, 20, 0.15),
    0px 6px 20px 3px rgba(20, 20, 20, 0.12);

  border-radius: 8px;
  background-color: var(--bg-action); /* AC #3: Use bg-action variable */
  border: none;
  cursor: pointer;
  text-decoration: none;
  transition: all 0.2s ease;
  user-select: none;
  overflow: hidden;
}

.enhanced-button:hover {
  background-color: #f9fafb;
  box-shadow:
    0px 2px 4px 0px rgba(20, 20, 20, 0.3),
    0px 4px 8px 2px rgba(20, 20, 20, 0.22),
    0px 6px 16px 3px rgba(20, 20, 20, 0.18),
    0px 8px 25px 4px rgba(20, 20, 20, 0.15);
  transform: translateY(-2px);
}

.enhanced-button:active {
  transform: translateY(0);
  box-shadow:
    0px 0.5px 1px 0px rgba(20, 20, 20, 0.2),
    0px 1px 3px 0.5px rgba(20, 20, 20, 0.15),
    0px 2px 6px 1px rgba(20, 20, 20, 0.12),
    0px 3px 10px 1.5px rgba(20, 20, 20, 0.08);
}

.enhanced-button:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.enhanced-button:disabled {
  cursor: not-allowed;
  opacity: 0.5;
  transform: none;
  box-shadow:
    0px 1px 2px 0px rgba(20, 20, 20, 0.15),
    0px 2px 6px 1px rgba(20, 20, 20, 0.08);
}

.enhanced-button:disabled:hover {
  background-color: var(--bg-action);
  transform: none;
  box-shadow:
    0px 1px 2px 0px rgba(20, 20, 20, 0.15),
    0px 2px 6px 1px rgba(20, 20, 20, 0.08);
}

/* Center the icon and text together with 4px gap */
.enhanced-button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

/* Button text - use body typography */
.enhanced-button .button-text {
  font-size: var(--font-body-size) !important;
  line-height: var(--font-body-line-height) !important;
  font-family: 'Geist Regular, sans-serif' !important;
  font-weight: normal !important;
  color: #141414 !important;
}

/* Button icon - 14px x 14px */
.enhanced-button .button-icon {
  width: 14px !important;
  height: 14px !important;
  color: #141414 !important;
  opacity: 1 !important;
  flex-shrink: 0;
}

/* Enhanced button with max width constraint for Add buttons */
.enhanced-button-add {
  max-width: 220px;
}

/* Enhanced button with fixed width for Reset button */
.enhanced-button-reset {
  width: 120px;
}

/* Enhanced Input Component */
.enhanced-input {
  height: 28px !important;
  border-radius: 8px !important;
  border: 1px solid var(--border-main) !important;
  background-color: var(--bg-secondary) !important;
  color: var(--text-main) !important;
  font-size: var(--font-body-size) !important;
  line-height: var(--font-body-line-height) !important;
  font-family: 'Geist Regular, sans-serif' !important;
  padding: 0 12px !important;
  box-sizing: border-box !important;
  transition: border-color 0.2s ease !important;
}

.enhanced-input:focus {
  border-color: var(--border-action) !important;
  outline: none !important;
}

.enhanced-input:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

/* Mathematical Formula Display Styles */
.formula-container {
  background: var(--bg-secondary);
  border-radius: 8px;
  padding: 16px;
  margin-top: 8px;
  overflow-x: auto;
  position: relative;
}

.binomial {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  margin: 0 4px;
  position: relative;
  padding: 0 8px;
}

.binomial::before {
  content: "(";
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%) scaleY(2);
  font-family: 'Monaco', 'Courier New', monospace;
  color: var(--text-main);
}

.binomial::after {
  content: ")";
  position: absolute;
  right: 0;
  top: 50%;
  transform: translateY(-50%) scaleY(2);
  font-family: 'Monaco', 'Courier New', monospace;
  color: var(--text-main);
}

.binomial .top,
.binomial .bottom {
  line-height: 1;
  padding: 2px;
  font-family: 'Monaco', 'Courier New', monospace;
  color: var(--text-main);
}

.formula-line {
  display: flex;
  align-items: center;
  padding: 8px 0;
  font-family: 'Monaco', 'Courier New', monospace;
  color: var(--text-main);
}

.prob-label {
  color: var(--text-secondary);
  margin-right: 12px;
  min-width: 80px;
  font-family: 'Monaco', 'Courier New', monospace;
}

.operator {
  margin: 0 8px;
  color: var(--icon-main);
  font-family: 'Monaco', 'Courier New', monospace;
}

.equals {
  margin-left: 16px;
  font-weight: 600;
  color: var(--text-main);
  font-family: 'Monaco', 'Courier New', monospace;
}

.formula-total {
  border-top: 2px solid var(--border-main);
  margin-top: 8px;
  padding-top: 12px;
  font-weight: 600;
  color: var(--text-main);
}

/* Formula expand/collapse animation */
.formula-container {
  transition: all 0.3s ease-in-out;
  opacity: 0;
  max-height: 0;
  overflow: hidden;
  padding: 0 16px;
}

.formula-container.expanded {
  opacity: 1;
  max-height: 800px;
  padding: 16px;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .formula-line {
    flex-wrap: wrap;
  }
  
  .equals {
    width: 100%;
    text-align: right;
    margin-top: 8px;
    margin-left: 0;
  }
  
  .prob-label {
    min-width: 60px;
  }
}

/* Scroll indicator for wide formulas */
.formula-container[data-scrollable="true"]::after {
  content: "";
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 20px;
  background: linear-gradient(to right, transparent, var(--bg-secondary));
  pointer-events: none;
}

/* Formula button styles */
.formula-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background: var(--bg-secondary);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-left: 8px;
  vertical-align: middle;
}

.formula-button:hover {
  background: var(--bg-action-secondary);
}

.formula-button .button-icon {
  width: 14px !important;
  height: 14px !important;
  color: var(--icon-main) !important;
}

/* Formula button expanded state */
.formula-button.expanded {
  background: var(--bg-action-secondary);
}

/* Tooltip styles */
.tooltip {
  position: relative;
  display: inline-block;
}

.tooltip::after {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--bg-secondary);
  color: var(--text-main);
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 1000;
  margin-bottom: 4px;
  border: 1px solid var(--border-main);
}

.tooltip:hover::after {
  opacity: 1;
}